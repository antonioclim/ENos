@startuml 02_thread_director_flow
!theme plain
skinparam backgroundColor #FEFEFE

title Intel Thread Director: Scheduling Flow

participant "Thread" as T
participant "Thread\nDirector\n(Hardware)" as TD
participant "HFI\nTable" as HFI
participant "OS\nScheduler" as OS
participant "P-Core" as P
participant "E-Core" as E

T -> TD: Execute instructions
TD -> TD: Analysis:\n- Instruction mix\n- Cache miss rate\n- Vector usage

alt FP/Vector Heavy
    TD -> HFI: Update: "Needs P-core"
    HFI -> OS: Hint: Performance
    OS -> P: Schedule thread
else Integer/IO Bound  
    TD -> HFI: Update: "E-core OK"
    HFI -> OS: Hint: Efficiency
    OS -> E: Schedule thread
end

note over TD
  Classification in
  nanoseconds
end note

note over OS
  Final decision
  remains with OS
end note

@enduml
