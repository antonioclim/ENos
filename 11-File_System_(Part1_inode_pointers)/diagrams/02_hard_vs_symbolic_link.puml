@startuml hard_vs_symbolic_link
!include ../../diagrams_common/skin.puml
title Hard Link vs Symbolic Link

skinparam rectangle {
    roundCorner 8
}

rectangle "**HARD LINK**" as hard #C8E6C9 {
    
    rectangle "Directory /home/user" as hard_dir #FFFFFF {
        rectangle "original.txt\ninode: **12345**" as hard_orig #E3F2FD
        rectangle "hardlink.txt\ninode: **12345**" as hard_link #E3F2FD
    }
    
    rectangle "Inode Table" as hard_inode #FFF9C4 {
        rectangle "**Inode 12345**\nLinks: 2\nSize: 6 bytes" as hard_in #FFFFFF
    }
    
    rectangle "Data Block 100\n\"Hello\\n\"" as hard_data #FFE0B2
    
    hard_orig -[#27AE60,bold]-> hard_in
    hard_link -[#27AE60,bold]-> hard_in
    hard_in -[#3498DB]-> hard_data
    
    note bottom of hard
    ✓ **Same inode** (12345)
    ✓ On deleting original → data remains
    ✗ Cannot cross filesystem
    ✗ Cannot link to directories
    end note
}

rectangle "**SYMBOLIC LINK**" as sym #E3F2FD {
    
    rectangle "Directory /home/user" as sym_dir #FFFFFF {
        rectangle "original.txt\ninode: **12345**" as sym_orig #C8E6C9
        rectangle "symlink.txt\ninode: **67890**" as sym_link #FCE4EC
    }
    
    rectangle "Inode Table" as sym_inode #FFF9C4 {
        rectangle "**Inode 12345**\nLinks: 1\nType: file" as sym_in1 #FFFFFF
        rectangle "**Inode 67890**\nLinks: 1\nType: **symlink**\nContent: \"original.txt\"" as sym_in2 #FFFFFF
    }
    
    rectangle "Data Block 100\n\"Hello\\n\"" as sym_data #FFE0B2
    
    sym_orig -[#27AE60,bold]-> sym_in1
    sym_link -[#E74C3C,dashed]-> sym_in2 : different inode!
    sym_in2 -[#E74C3C,dashed]-> sym_orig : points\nto path
    sym_in1 -[#3498DB]-> sym_data
    
    note bottom of sym
    ✓ **Different inode** (67890)
    ✓ Can cross filesystem
    ✓ Can link to directories
    ✗ On deleting original → **BROKEN LINK!**
    end note
}

hard -[hidden]right-> sym

legend bottom
|= Aspect |= Hard Link |= Symbolic Link |
| Inode | SAME | DIFFERENT |
| Cross-filesystem | ❌ | ✅ |
| Link to directories | ❌ | ✅ |
| On deleting target | Data remains | Link broken |
| Space | Only dir entry | Dir entry + inode |
endlegend

@enduml
