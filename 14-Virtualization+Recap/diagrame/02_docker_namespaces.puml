@startuml docker_namespaces
!include ../../diagrame_common/skin.puml
title Docker and Linux Namespaces

skinparam rectangle {
    roundCorner 8
}

rectangle "**DOCKER ARCHITECTURE**" as docker #E3F2FD {
    
    rectangle "Docker Client\n(docker CLI)" as client #FFFFFF
    
    rectangle "Docker Daemon\n(dockerd)" as daemon #FFF9C4
    
    rectangle "Container Runtime\n(containerd → runc)" as runtime #FFE0B2
    
    rectangle "Linux Kernel" as kernel #C8E6C9 {
        rectangle "Namespaces" as ns #FFFFFF
        rectangle "cgroups" as cg #FFFFFF
        rectangle "Union FS" as ufs #FFFFFF
    }
    
    client -[#3498DB]-> daemon : REST API
    daemon -[#27AE60]-> runtime
    runtime -[#E74C3C]-> kernel
}

rectangle "**LINUX NAMESPACES** (Isolation)" as namespaces #FFF9C4 {
    
    rectangle "**pid**\nProcess IDs\nseparate" as pid #E3F2FD
    
    rectangle "**net**\nNetwork stack\nown" as net #C8E6C9
    
    rectangle "**mnt**\nFilesystem\nmounts" as mnt #FCE4EC
    
    rectangle "**user**\nUser/Group\nIDs" as user #E1BEE7
    
    rectangle "**uts**\nHostname\nseparate" as uts #FFCDD2
    
    rectangle "**ipc**\nInter-Process\nComm." as ipc #FFF9C4
}

rectangle "**CGROUPS** (Resource limiting)" as cgroups #C8E6C9 {
    note as cg_note
    • **cpu**: Limits CPU time
    • **memory**: Limits RAM
    • **blkio**: Limits disk I/O
    • **devices**: Device control
    end note
}

note bottom
**Container = Isolated process through:**
1. **Namespaces**: Isolation (what the process sees)
2. **cgroups**: Limiting (how much it can use)
3. **Union FS**: Layered images (efficiency)

**Verification:** ls /proc/$$/ns/
end note

@enduml
